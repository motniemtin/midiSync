{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///www/wwwroot/pianosync.com/src/store/hooks.ts"],"sourcesContent":["import { TypedUseSelectorHook, useDispatch as useAppDispatch,\r\n    useSelector as useAppSelector, } from \"react-redux\";\r\nimport type { RootState, AppDispatch } from \"./store\";\r\n\r\nexport const useDispatch = () => useAppDispatch<AppDispatch>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = useAppSelector;\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAIO,MAAM,cAAc,IAAM,IAAA,8JAAc;AACxC,MAAM,cAA+C,8JAAc","debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///www/wwwroot/pianosync.com/src/hooks/useSocket.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useRef, useState } from \"react\";\n\nexport function useSocket() {\n  const ioRef = useRef(null);\n  const [connected, setConnected] = useState(false);\n  const hasInitialized = useRef(false);\n\n  useEffect(() => {\n    if (hasInitialized.current) return;\n    hasInitialized.current = true;\n\n    if (typeof window === \"undefined\") return;\n\n    if (window.__sailsIO) {\n      console.log(\"â™»ï¸ Using existing sails.io instance\");\n      ioRef.current = window.__sailsIO;\n      setConnected(window.__sailsIO.socket.connected);\n      return;\n    }\n\n    console.log(\"ðŸ†• Creating new sails.io instance\");\n    const sailsIOClient = require(\"sails.io.js\");\n    const socketIOClient = require(\"socket.io-client\");\n    const ioSocket = sailsIOClient(socketIOClient);\n\n    ioSocket.sails.url = \"https://server.pianosync.com\";\n    ioSocket.sails.transports = [\"websocket\"];\n    ioSocket.sails.reconnection = true;\n\n    const token = localStorage.getItem(\"token\");\n    if (token) ioSocket.sails.headers = { Authorization: `Bearer ${token}` };\n\n    ioSocket.socket.on(\"connect\", () => {\n      console.log(\"âœ… Connected to Sails\");\n      setConnected(true);\n    });\n\n    ioSocket.socket.on(\"disconnect\", () => {\n      console.log(\"âŒ Disconnected\");\n      setConnected(false);\n    });\n\n    ioRef.current = ioSocket;\n    window.__sailsIO = ioSocket;\n  }, []);\n\n  return { io: ioRef.current, connected };\n}\n"],"names":[],"mappings":";;;;AACA;AADA;;AAGO,SAAS;IACd,MAAM,QAAQ,IAAA,+MAAM,EAAC;IACrB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,iBAAiB,IAAA,+MAAM,EAAC;IAE9B,IAAA,kNAAS,EAAC;QACR,IAAI,eAAe,OAAO,EAAE;QAC5B,eAAe,OAAO,GAAG;QAEzB,wCAAmC;;;QAUnC,MAAM;QACN,MAAM;QACN,MAAM;QAMN,MAAM;IAeR,GAAG,EAAE;IAEL,OAAO;QAAE,IAAI,MAAM,OAAO;QAAE;IAAU;AACxC","debugId":null}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///www/wwwroot/pianosync.com/src/hooks/SocketContext.js"],"sourcesContent":["\"use client\";\nimport { createContext, useContext, useMemo } from \"react\";\nimport { useSocket } from \"@/hooks/useSocket\";\n\n// ðŸ§© Táº¡o context chia sáº» socket toÃ n app\nconst SocketContext = createContext({\n  io: null,\n  connected: false,\n});\n\n// ðŸ§± Provider bá»c toÃ n bá»™ pháº§n client cá»§a app\nexport function SocketProvider({ children }) {\n  // Hook táº¡o hoáº·c tÃ¡i sá»­ dá»¥ng socket instance (cÃ³ cache)\n  const { io, connected } = useSocket();\n\n  // âš¡ DÃ¹ng useMemo Ä‘á»ƒ trÃ¡nh re-render khÃ´ng cáº§n thiáº¿t\n  const value = useMemo(() => ({ io, connected }), [io, connected]);\n\n  return (\n    <SocketContext.Provider value={value}>\n      {children}\n    </SocketContext.Provider>\n  );\n}\n\n// ðŸ§© Hook tiá»‡n dá»¥ng Ä‘á»ƒ dÃ¹ng socket á»Ÿ má»i nÆ¡i\nexport const useSocketContext = () => {\n  const context = useContext(SocketContext);\n  if (!context) {\n    throw new Error(\"useSocketContext must be used within a SocketProvider\");\n  }\n  return context;\n};\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAFA;;;;AAIA,yCAAyC;AACzC,MAAM,8BAAgB,IAAA,sNAAa,EAAC;IAClC,IAAI;IACJ,WAAW;AACb;AAGO,SAAS,eAAe,EAAE,QAAQ,EAAE;IACzC,uDAAuD;IACvD,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,IAAA,sIAAS;IAEnC,oDAAoD;IACpD,MAAM,QAAQ,IAAA,gNAAO,EAAC,IAAM,CAAC;YAAE;YAAI;QAAU,CAAC,GAAG;QAAC;QAAI;KAAU;IAEhE,qBACE,8OAAC,cAAc,QAAQ;QAAC,OAAO;kBAC5B;;;;;;AAGP;AAGO,MAAM,mBAAmB;IAC9B,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///www/wwwroot/pianosync.com/src/app/%28pianosync%29/layout.tsx"],"sourcesContent":["\"use client\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Container from \"@mui/material/Container\";\r\nimport { styled, useTheme } from \"@mui/material/styles\";\r\nimport React, { useState } from \"react\";\r\nimport Header from \"./layout/vertical/header/Header\";\r\nimport Sidebar from \"./layout/vertical/sidebar/Sidebar\";\r\nimport Customizer from \"./layout/shared/customizer/Customizer\";\r\nimport Navigation from \"./layout/horizontal/navbar/Navigation\";\r\nimport HorizontalHeader from \"./layout/horizontal/header/Header\";\r\nimport { useSelector } from \"@/store/hooks\";\r\nimport { AppState } from \"@/store/store\";\r\nimport ReactQueryProvider from \"./ReactQueryProvider\";\r\nimport { SocketProvider } from \"@/hooks/SocketContext\";\r\nimport { ToastContainer } from 'react-toastify';\r\nconst MainWrapper = styled(\"div\")(() => ({\r\n  display: \"flex\",\r\n  minHeight: \"100vh\",\r\n  width: \"100%\",\r\n}));\r\n\r\nconst PageWrapper = styled(\"div\")(() => ({\r\n  display: \"flex\",\r\n  flexGrow: 1,\r\n  paddingBottom: \"60px\",\r\n  flexDirection: \"column\",\r\n  zIndex: 1,\r\n  backgroundColor: \"transparent\",\r\n}));\r\n\r\ninterface Props {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n  const [isMobileSidebarOpen, setMobileSidebarOpen] = useState(false);\r\n  const customizer = useSelector((state: AppState) => state.customizer);\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <MainWrapper>\r\n      <SocketProvider>\r\n        <ReactQueryProvider>\r\n          {/* ------------------------------------------- */}\r\n          {/* Sidebar */}\r\n          {/* ------------------------------------------- */}\r\n          {customizer.isHorizontal ? \"\" : <Sidebar />}\r\n          {/* ------------------------------------------- */}\r\n          {/* Main Wrapper */}\r\n          {/* ------------------------------------------- */}\r\n          <PageWrapper\r\n            className=\"page-wrapper\"\r\n            sx={{\r\n              ...(customizer.isCollapse && {\r\n                [theme.breakpoints.up(\"lg\")]: {\r\n                  ml: `${customizer.MiniSidebarWidth}px`,\r\n                },\r\n              }),\r\n            }}\r\n          >\r\n            {/* ------------------------------------------- */}\r\n            {/* Header */}\r\n            {/* ------------------------------------------- */}\r\n            {customizer.isHorizontal ? <HorizontalHeader /> : <Header />}\r\n            {/* PageContent */}\r\n            {customizer.isHorizontal ? <Navigation /> : \"\"}\r\n            <Container\r\n              sx={{\r\n                maxWidth:\r\n                  customizer.isLayout === \"boxed\" ? \"lg\" : \"100%!important\",\r\n              }}\r\n            >\r\n              {/* ------------------------------------------- */}\r\n              {/* PageContent */}\r\n              {/* ------------------------------------------- */}\r\n              <ToastContainer position=\"top-center\" />\r\n              <Box sx={{ minHeight: \"calc(100vh - 170px)\" }}>{children}</Box>\r\n\r\n              {/* ------------------------------------------- */}\r\n              {/* End Page */}\r\n              {/* ------------------------------------------- */}\r\n            </Container>\r\n          </PageWrapper>\r\n        </ReactQueryProvider>\r\n      </SocketProvider>\r\n    </MainWrapper>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;AAMA;;;;;;AAGA;AACA;AAdA;;;;;;;;;;;;;;AAeA,MAAM,cAAc,IAAA,oNAAM,EAAC,OAAO,IAAM,CAAC;QACvC,SAAS;QACT,WAAW;QACX,OAAO;IACT,CAAC;AAED,MAAM,cAAc,IAAA,oNAAM,EAAC,OAAO,IAAM,CAAC;QACvC,SAAS;QACT,UAAU;QACV,eAAe;QACf,eAAe;QACf,QAAQ;QACR,iBAAiB;IACnB,CAAC;AAMc,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,MAAM,CAAC,eAAe,eAAe,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,qBAAqB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,aAAa,IAAA,oIAAW,EAAC,CAAC,QAAoB,MAAM,UAAU;IACpE,MAAM,QAAQ,IAAA,0MAAQ;IAEtB,qBACE,8OAAC;kBACC,cAAA,8OAAC,+IAAc;sBACb,cAAA,8OAAC;;oBAIE,WAAW,YAAY,GAAG,mBAAK,8OAAC;;;;;kCAIjC,8OAAC;wBACC,WAAU;wBACV,IAAI;4BACF,GAAI,WAAW,UAAU,IAAI;gCAC3B,CAAC,MAAM,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE;oCAC5B,IAAI,GAAG,WAAW,gBAAgB,CAAC,EAAE,CAAC;gCACxC;4BACF,CAAC;wBACH;;4BAKC,WAAW,YAAY,iBAAG,8OAAC;;;;qDAAsB,8OAAC;;;;;4BAElD,WAAW,YAAY,iBAAG,8OAAC;;;;uCAAgB;0CAC5C,8OAAC,sKAAS;gCACR,IAAI;oCACF,UACE,WAAW,QAAQ,KAAK,UAAU,OAAO;gCAC7C;;kDAKA,8OAAC,qKAAc;wCAAC,UAAS;;;;;;kDACzB,8OAAC,0JAAG;wCAAC,IAAI;4CAAE,WAAW;wCAAsB;kDAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW9D","debugId":null}}]
}