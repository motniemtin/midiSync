{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///www/wwwroot/pianosync.com/src/app/%28DashboardLayout%29/test/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useTranslation } from 'react-i18next';\nimport { useState, useCallback } from 'react';\nimport { AlphaTabViewer } from '@/components/AlphaTabViewer';\n\nexport default function Test() {\n    const { t } = useTranslation();\n    const [score, setScore] = useState(null);\n    const [notesJson, setNotesJson] = useState(null);\n\n    // Thay thế bằng đường dẫn thực tế đến file xml của bạn\n    const xmlPath = \"/windy_hill.musicxml\";\n\n    const handleScoreLoaded = useCallback((loadedScore: any) => {\n        setScore(loadedScore);\n        try {\n            const _notesJson: any = {};\n            const track = loadedScore.tracks[0];\n            let _tempo = 120;\n            let _currentTime = 0;\n\n            track.staves.forEach((stave: any) => {\n                stave.bars.forEach((bar: any) => {\n                    if (loadedScore.masterBars[bar.index].tempoAutomation) {\n                        _tempo = loadedScore.masterBars[bar.index].tempoAutomation.value;\n                    }\n                    bar.voices.forEach((voice: any) => {\n                        voice.beats.forEach((beat: any) => {\n                            const _duration = ((beat.playbackDuration * (60000.0 / (_tempo * 960))) | 0) / 1000;\n                            beat.notes.forEach((note: any) => {\n                                if (typeof _notesJson[note.displayValue] === \"undefined\") {\n                                    _notesJson[note.displayValue] = [];\n                                }\n                                _notesJson[note.displayValue].push({ start: _currentTime, stop: _currentTime + _duration, fret: note.fret, string: note.string });\n                            });\n                            _currentTime += _duration;\n                        });\n                    });\n                });\n            });\n            setNotesJson(_notesJson);\n            console.log(\"Notes JSON created:\", _notesJson);\n        } catch (e) {\n            console.error(\"Error processing score:\", e);\n            }\n    }, []);\n\n    const handlePlayerPositionChanged = useCallback((e: any) => {\n        // Xử lý khi vị trí player thay đổi, ví dụ: console.log(e.currentTime);\n    }, []);\n\n    return (\n        <div>\n            <h1>{t('Test Page')}</h1>\n            <AlphaTabViewer \n                xmlPath={xmlPath} \n                onScoreLoaded={handleScoreLoaded}\n                onPlayerPositionChanged={handlePlayerPositionChanged}\n            />\n            {/* Bạn có thể hiển thị dữ liệu notesJson ở đây để kiểm tra */}\n            {notesJson && <pre>{JSON.stringify(notesJson, null, 2)}</pre>}\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;;;;;;AAHA;;;;;AAMe,SAAS;IACpB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,kLAAc;IAC5B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,uDAAuD;IACvD,MAAM,UAAU;IAEhB,MAAM,oBAAoB,IAAA,oNAAW,EAAC,CAAC;QACnC,SAAS;QACT,IAAI;YACA,MAAM,aAAkB,CAAC;YACzB,MAAM,QAAQ,YAAY,MAAM,CAAC,EAAE;YACnC,IAAI,SAAS;YACb,IAAI,eAAe;YAEnB,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC;gBAClB,MAAM,IAAI,CAAC,OAAO,CAAC,CAAC;oBAChB,IAAI,YAAY,UAAU,CAAC,IAAI,KAAK,CAAC,CAAC,eAAe,EAAE;wBACnD,SAAS,YAAY,UAAU,CAAC,IAAI,KAAK,CAAC,CAAC,eAAe,CAAC,KAAK;oBACpE;oBACA,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC;wBAChB,MAAM,KAAK,CAAC,OAAO,CAAC,CAAC;4BACjB,MAAM,YAAY,CAAC,AAAC,KAAK,gBAAgB,GAAG,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,IAAK,CAAC,IAAI;4BAC/E,KAAK,KAAK,CAAC,OAAO,CAAC,CAAC;gCAChB,IAAI,OAAO,UAAU,CAAC,KAAK,YAAY,CAAC,KAAK,aAAa;oCACtD,UAAU,CAAC,KAAK,YAAY,CAAC,GAAG,EAAE;gCACtC;gCACA,UAAU,CAAC,KAAK,YAAY,CAAC,CAAC,IAAI,CAAC;oCAAE,OAAO;oCAAc,MAAM,eAAe;oCAAW,MAAM,KAAK,IAAI;oCAAE,QAAQ,KAAK,MAAM;gCAAC;4BACnI;4BACA,gBAAgB;wBACpB;oBACJ;gBACJ;YACJ;YACA,aAAa;YACb,QAAQ,GAAG,CAAC,uBAAuB;QACvC,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,2BAA2B;QACzC;IACR,GAAG,EAAE;IAEL,MAAM,8BAA8B,IAAA,oNAAW,EAAC,CAAC;IAC7C,uEAAuE;IAC3E,GAAG,EAAE;IAEL,qBACI,8OAAC;;0BACG,8OAAC;0BAAI,EAAE;;;;;;0BACP,8OAAC;gBACG,SAAS;gBACT,eAAe;gBACf,yBAAyB;;;;;;YAG5B,2BAAa,8OAAC;0BAAK,KAAK,SAAS,CAAC,WAAW,MAAM;;;;;;;;;;;;AAGhE","debugId":null}}]
}