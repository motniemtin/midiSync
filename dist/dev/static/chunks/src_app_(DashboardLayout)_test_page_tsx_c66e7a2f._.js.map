{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///www/wwwroot/pianosync.com/src/app/%28DashboardLayout%29/test/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useTranslation } from 'react-i18next';\nimport { useState, useCallback } from 'react';\nimport { AlphaTabViewer } from '@/components/AlphaTabViewer';\n\nexport default function Test() {\n    const { t } = useTranslation();\n    const [score, setScore] = useState(null);\n    const [notesJson, setNotesJson] = useState(null);\n\n    // Thay thế bằng đường dẫn thực tế đến file xml của bạn\n    const xmlPath = \"/windy_hill.musicxml\";\n\n    const handleScoreLoaded = useCallback((loadedScore: any) => {\n        setScore(loadedScore);\n        try {\n            const _notesJson: any = {};\n            const track = loadedScore.tracks[0];\n            let _tempo = 120;\n            let _currentTime = 0;\n\n            track.staves.forEach((stave: any) => {\n                stave.bars.forEach((bar: any) => {\n                    if (loadedScore.masterBars[bar.index].tempoAutomation) {\n                        _tempo = loadedScore.masterBars[bar.index].tempoAutomation.value;\n                    }\n                    bar.voices.forEach((voice: any) => {\n                        voice.beats.forEach((beat: any) => {\n                            const _duration = ((beat.playbackDuration * (60000.0 / (_tempo * 960))) | 0) / 1000;\n                            beat.notes.forEach((note: any) => {\n                                if (typeof _notesJson[note.displayValue] === \"undefined\") {\n                                    _notesJson[note.displayValue] = [];\n                                }\n                                _notesJson[note.displayValue].push({ start: _currentTime, stop: _currentTime + _duration, fret: note.fret, string: note.string });\n                            });\n                            _currentTime += _duration;\n                        });\n                    });\n                });\n            });\n            setNotesJson(_notesJson);\n            console.log(\"Notes JSON created:\", _notesJson);\n        } catch (e) {\n            console.error(\"Error processing score:\", e);\n            }\n    }, []);\n\n    const handlePlayerPositionChanged = useCallback((e: any) => {\n        // Xử lý khi vị trí player thay đổi, ví dụ: console.log(e.currentTime);\n    }, []);\n\n    return (\n        <div>\n            <h1>{t('Test Page')}</h1>\n            <AlphaTabViewer \n                xmlPath={xmlPath} \n                onScoreLoaded={handleScoreLoaded}\n                onPlayerPositionChanged={handlePlayerPositionChanged}\n            />\n            {/* Bạn có thể hiển thị dữ liệu notesJson ở đây để kiểm tra */}\n            {notesJson && <pre>{JSON.stringify(notesJson, null, 2)}</pre>}\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;;;;;;;;AAHA;;;;AAMe,SAAS;;IACpB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,qLAAc;IAC5B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,uDAAuD;IACvD,MAAM,UAAU;IAEhB,MAAM,oBAAoB,IAAA,4KAAW;+CAAC,CAAC;YACnC,SAAS;YACT,IAAI;gBACA,MAAM,aAAkB,CAAC;gBACzB,MAAM,QAAQ,YAAY,MAAM,CAAC,EAAE;gBACnC,IAAI,SAAS;gBACb,IAAI,eAAe;gBAEnB,MAAM,MAAM,CAAC,OAAO;2DAAC,CAAC;wBAClB,MAAM,IAAI,CAAC,OAAO;mEAAC,CAAC;gCAChB,IAAI,YAAY,UAAU,CAAC,IAAI,KAAK,CAAC,CAAC,eAAe,EAAE;oCACnD,SAAS,YAAY,UAAU,CAAC,IAAI,KAAK,CAAC,CAAC,eAAe,CAAC,KAAK;gCACpE;gCACA,IAAI,MAAM,CAAC,OAAO;2EAAC,CAAC;wCAChB,MAAM,KAAK,CAAC,OAAO;mFAAC,CAAC;gDACjB,MAAM,YAAY,CAAC,AAAC,KAAK,gBAAgB,GAAG,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,IAAK,CAAC,IAAI;gDAC/E,KAAK,KAAK,CAAC,OAAO;2FAAC,CAAC;wDAChB,IAAI,OAAO,UAAU,CAAC,KAAK,YAAY,CAAC,KAAK,aAAa;4DACtD,UAAU,CAAC,KAAK,YAAY,CAAC,GAAG,EAAE;wDACtC;wDACA,UAAU,CAAC,KAAK,YAAY,CAAC,CAAC,IAAI,CAAC;4DAAE,OAAO;4DAAc,MAAM,eAAe;4DAAW,MAAM,KAAK,IAAI;4DAAE,QAAQ,KAAK,MAAM;wDAAC;oDACnI;;gDACA,gBAAgB;4CACpB;;oCACJ;;4BACJ;;oBACJ;;gBACA,aAAa;gBACb,QAAQ,GAAG,CAAC,uBAAuB;YACvC,EAAE,OAAO,GAAG;gBACR,QAAQ,KAAK,CAAC,2BAA2B;YACzC;QACR;8CAAG,EAAE;IAEL,MAAM,8BAA8B,IAAA,4KAAW;yDAAC,CAAC;QAC7C,uEAAuE;QAC3E;wDAAG,EAAE;IAEL,qBACI,6LAAC;;0BACG,6LAAC;0BAAI,EAAE;;;;;;0BACP,6LAAC;gBACG,SAAS;gBACT,eAAe;gBACf,yBAAyB;;;;;;YAG5B,2BAAa,6LAAC;0BAAK,KAAK,SAAS,CAAC,WAAW,MAAM;;;;;;;;;;;;AAGhE;GA1DwB;;QACN,qLAAc;;;KADR","debugId":null}}]
}