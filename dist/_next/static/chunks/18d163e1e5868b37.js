(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97084,(t,e,n)=>{e.exports=function(t,e,n){if(null!=t&&"number"!=typeof t)throw Error("start must be a number or null");if(null!=e&&"number"!=typeof e)throw Error("stop must be a number or null");if(null!=n&&"number"!=typeof n)throw Error("step must be a number or null");null==e&&(e=t||0,t=0),null==n&&(n=e>t?1:-1);for(var o=[],r=t<e;r?t<e:t>e;t+=n)o.push(t);return o}},43794,(t,e,n)=>{!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var t="",e=0;e<arguments.length;e++){var i=arguments[e];i&&(t=r(t,function(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return o.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var i in t)n.call(t,i)&&t[i]&&(e=r(e,i));return e}(i)))}return t}function r(t,e){return e?t?t+" "+e:t+e:t}if(e.exports)o.default=o,e.exports=o;else if("function"==typeof define&&"object"==typeof define.amd&&define.amd)void 0!==o&&t.v(o);else window.classNames=o}()},46840,(t,e,n)=>{var o,r,i,a="__lodash_hash_undefined__",u=/^\[object .+?Constructor\]$/,s=t.g&&t.g.Object===Object&&t.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")();function p(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e){for(var o=d,r=t.length,i=-1;++i<r;)if(o(t[i],i,t))return i;return -1}for(var a=-1,u=t.length;++a<u;)if(t[a]===e)return a;return -1}(t,e,0)>-1}function d(t){return t!=t}function f(t,e){return t.has(e)}var h=Array.prototype,y=Function.prototype,v=Object.prototype,b=c["__core-js_shared__"],N=(o=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",g=y.toString,m=v.hasOwnProperty,_=v.toString,w=RegExp("^"+g.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=c.Symbol,P=v.propertyIsEnumerable,R=h.splice,I=k?k.isConcatSpreadable:void 0,S=Math.max,E=M(c,"Map"),A=M(Object,"create");function j(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function T(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function x(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function O(t){var e=-1,n=t?t.length:0;for(this.__data__=new x;++e<n;)this.add(t[e])}function K(t,e){for(var n,o,r=t.length;r--;){if(n=t[r][0],n===(o=e)||n!=n&&o!=o)return r}return -1}function q(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function M(t,e){var n,o=null==t?void 0:t[e];return!(!U(o)||(n=o,N&&N in n))&&(F(o)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(o)?w:u).test(function(t){if(null!=t){try{return g.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(o))?o:void 0}function C(t){var e;return L(t)||W(e=t)&&m.call(e,"callee")&&(!P.call(e,"callee")||"[object Arguments]"==_.call(e))||!!(I&&t&&t[I])}j.prototype.clear=function(){this.__data__=A?A(null):{}},j.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},j.prototype.get=function(t){var e=this.__data__;if(A){var n=e[t];return n===a?void 0:n}return m.call(e,t)?e[t]:void 0},j.prototype.has=function(t){var e=this.__data__;return A?void 0!==e[t]:m.call(e,t)},j.prototype.set=function(t,e){return this.__data__[t]=A&&void 0===e?a:e,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(t){var e=this.__data__,n=K(e,t);return!(n<0)&&(n==e.length-1?e.pop():R.call(e,n,1),!0)},T.prototype.get=function(t){var e=this.__data__,n=K(e,t);return n<0?void 0:e[n][1]},T.prototype.has=function(t){return K(this.__data__,t)>-1},T.prototype.set=function(t,e){var n=this.__data__,o=K(n,t);return o<0?n.push([t,e]):n[o][1]=e,this},x.prototype.clear=function(){this.__data__={hash:new j,map:new(E||T),string:new j}},x.prototype.delete=function(t){return q(this,t).delete(t)},x.prototype.get=function(t){return q(this,t).get(t)},x.prototype.has=function(t){return q(this,t).has(t)},x.prototype.set=function(t,e){return q(this,t).set(t,e),this},O.prototype.add=O.prototype.push=function(t){return this.__data__.set(t,a),this},O.prototype.has=function(t){return this.__data__.has(t)};var D=(r=function(t,e){return W(t)?function(t,e,n,o){var r=-1,i=p,a=!0,u=t.length,s=[],l=e.length;if(!u)return s;e.length>=200&&(i=f,a=!1,e=new O(e));t:for(;++r<u;){var c=t[r],d=c;if(c=0!==c?c:0,a&&d==d){for(var h=l;h--;)if(e[h]===d)continue t;s.push(c)}else i(e,d,void 0)||s.push(c)}return s}(t,function t(e,n,o,r,i){var a=-1,u=e.length;for(o||(o=C),i||(i=[]);++a<u;){var s=e[a];n>0&&o(s)?n>1?t(s,n-1,o,r,i):function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n]}(i,s):r||(i[i.length]=s)}return i}(e,1,W,!0)):[]},i=S(void 0===i?r.length-1:i,0),function(){for(var t=arguments,e=-1,n=S(t.length-i,0),o=Array(n);++e<n;)o[e]=t[i+e];e=-1;for(var a=Array(i+1);++e<i;)a[e]=t[e];a[i]=o;switch(a.length){case 0:return r.call(this);case 1:return r.call(this,a[0]);case 2:return r.call(this,a[0],a[1]);case 3:return r.call(this,a[0],a[1],a[2])}return r.apply(this,a)}),L=Array.isArray;function W(t){var e,n,o;return!!(n=t)&&"object"==typeof n&&null!=(e=t)&&"number"==typeof(o=e.length)&&o>-1&&o%1==0&&o<=0x1fffffffffffff&&!F(e)}function F(t){var e=U(t)?_.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function U(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=D},94831,t=>{"use strict";var e=t.i(43476),n=t.i(71645);t.i(79626);var o=t.i(25191),r=t.i(97084),i=t.i(45009),a=t.i(43794),u=t.i(46840);function s(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function f(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return e&&("object"==typeof e||"function"==typeof e)?e:v(t)}var N=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],g=["Db","Eb","Gb","Ab","Bb"],m={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},_=/([a-g])([#b]?)(\d+)/,w=(0,r.default)(12,128).reduce(function(t,e){var n,o;return t[e]=(n=Math.floor((e-12)/12),o=N[(e-12)%12],{note:"".concat(o).concat(n),pitchName:o,octave:n,midiNumber:e,isAccidental:g.includes(o)}),t},{});function k(t){var e=w[t];if(!e)throw Error("Invalid MIDI number");return e}var P=(0,r.default)(12,128).filter(function(t){return!k(t).isAccidental}),R=function(t){if(!t)throw Error("Invalid note argument");var e=_.exec(t.toLowerCase());if(!e)throw Error("Invalid note argument");var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),4!==n.length);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return n}(e,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}(),o=n[1],r=n[2],i=n[3],a=m["".concat(o.toUpperCase()).concat(r)];if(null==a)throw Error("Invalid note argument");return 12+a+12*parseInt(i,10)},I=function(t){function e(){s(this,e);for(var t,n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return p(v(n=b(this,(t=h(e)).call.apply(t,[this].concat(r)))),"onPlayNoteInput",function(){n.props.onPlayNoteInput(n.props.midiNumber)}),p(v(n),"onStopNoteInput",function(){n.props.onStopNoteInput(n.props.midiNumber)}),n}return f(e,t),c(e,[{key:"getAbsoluteKeyPosition",value:function(t){var e=k(t),n=e.octave,o=e.pitchName;return this.props.pitchPositions[o]+7*n}},{key:"getRelativeKeyPosition",value:function(t){return this.getAbsoluteKeyPosition(t)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var t=this.props,e=t.naturalKeyWidth,o=t.accidentalWidthRatio,r=t.midiNumber,i=t.gliss,u=t.useTouchEvents,s=t.accidental,l=t.active,c=t.disabled,p=t.children;return n.default.createElement("div",{className:(0,a.default)("ReactPiano__Key",{"ReactPiano__Key--accidental":s,"ReactPiano__Key--natural":!s,"ReactPiano__Key--disabled":c,"ReactPiano__Key--active":l}),style:{left:S(this.getRelativeKeyPosition(r)*e),width:S(s?o*e:e)},onMouseDown:u?null:this.onPlayNoteInput,onMouseUp:u?null:this.onStopNoteInput,onMouseEnter:i?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:u?this.onPlayNoteInput:null,onTouchCancel:u?this.onStopNoteInput:null,onTouchEnd:u?this.onStopNoteInput:null},n.default.createElement("div",{className:"ReactPiano__NoteLabelContainer"},p))}}]),e}(n.default.Component);function S(t){return"".concat(100*t,"%")}p(I,"propTypes",{midiNumber:i.default.number.isRequired,naturalKeyWidth:i.default.number.isRequired,gliss:i.default.bool.isRequired,useTouchEvents:i.default.bool.isRequired,accidental:i.default.bool.isRequired,active:i.default.bool.isRequired,disabled:i.default.bool.isRequired,onPlayNoteInput:i.default.func.isRequired,onStopNoteInput:i.default.func.isRequired,accidentalWidthRatio:i.default.number.isRequired,pitchPositions:i.default.object.isRequired,children:i.default.node}),p(I,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});var E=function(t){function e(){return s(this,e),b(this,h(e).apply(this,arguments))}return f(e,t),c(e,[{key:"getMidiNumbers",value:function(){return(0,r.default)(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(t){return!k(t).isAccidental}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var t=this.props.width*this.getNaturalKeyWidth();return"".concat(t/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var t=this,e=this.getNaturalKeyWidth();return n.default.createElement("div",{className:(0,a.default)("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(o){var r=k(o),i=(r.note,r.isAccidental),a=!t.props.disabled&&t.props.activeNotes.includes(o);return n.default.createElement(I,{naturalKeyWidth:e,midiNumber:o,noteRange:t.props.noteRange,active:a,accidental:i,disabled:t.props.disabled,onPlayNoteInput:t.props.onPlayNoteInput,onStopNoteInput:t.props.onStopNoteInput,gliss:t.props.gliss,useTouchEvents:t.props.useTouchEvents,key:o},t.props.disabled?null:t.props.renderNoteLabel({isActive:a,isAccidental:i,midiNumber:o}))}))}}]),e}(n.default.Component);function A(t){return"number"==typeof t&&P.includes(t)}p(E,"propTypes",{noteRange:function(t,e,n){var o=t[e],r=o.first,i=o.last;return r&&i?A(r)&&A(i)?r>=i?Error("Invalid prop ".concat(e," supplied to ").concat(n,". ").concat(e,".first must be smaller than ").concat(e,".last.")):void 0:Error("Invalid prop ".concat(e," supplied to ").concat(n,". ").concat(e," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes).")):Error("Invalid prop ".concat(e," supplied to ").concat(n,". ").concat(e," must be an object with .first and .last values."))},activeNotes:i.default.arrayOf(i.default.number),onPlayNoteInput:i.default.func.isRequired,onStopNoteInput:i.default.func.isRequired,renderNoteLabel:i.default.func.isRequired,keyWidthToHeight:i.default.number.isRequired,className:i.default.string,disabled:i.default.bool,gliss:i.default.bool,useTouchEvents:i.default.bool,width:i.default.number}),p(E,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});var j=function(t){function e(){s(this,e);for(var t,n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return p(v(n=b(this,(t=h(e)).call.apply(t,[this].concat(r)))),"state",{isMouseDown:!1,useTouchEvents:!1}),p(v(n),"handleNoteChanges",function(t){var e=t.prevActiveNotes,o=t.nextActiveNotes;if(!n.props.disabled){var r=(0,u.default)(e,o);(0,u.default)(o,e).forEach(function(t){n.props.playNote(t)}),r.forEach(function(t){n.props.stopNote(t)})}}),p(v(n),"getMidiNumberForKey",function(t){if(!n.props.keyboardShortcuts)return null;var e=n.props.keyboardShortcuts.find(function(e){return e.key===t});return e&&e.midiNumber}),p(v(n),"getKeyForMidiNumber",function(t){if(!n.props.keyboardShortcuts)return null;var e=n.props.keyboardShortcuts.find(function(e){return e.midiNumber===t});return e&&e.key}),p(v(n),"onKeyDown",function(t){if(!t.ctrlKey&&!t.metaKey&&!t.shiftKey){var e=n.getMidiNumberForKey(t.key);e&&n.onPlayNoteInput(e)}}),p(v(n),"onKeyUp",function(t){var e=n.getMidiNumberForKey(t.key);e&&n.onStopNoteInput(e)}),p(v(n),"onPlayNoteInput",function(t){n.props.disabled||n.props.onPlayNoteInput(t,n.props.activeNotes)}),p(v(n),"onStopNoteInput",function(t){n.props.disabled||n.props.onStopNoteInput(t,n.props.activeNotes)}),p(v(n),"onMouseDown",function(){n.setState({isMouseDown:!0})}),p(v(n),"onMouseUp",function(){n.setState({isMouseDown:!1})}),p(v(n),"onTouchStart",function(){n.setState({useTouchEvents:!0})}),p(v(n),"renderNoteLabel",function(t){var e=t.midiNumber,o=t.isActive,r=t.isAccidental,i=n.getKeyForMidiNumber(e);return n.props.renderNoteLabel({keyboardShortcut:i,midiNumber:e,isActive:o,isAccidental:r})}),n}return f(e,t),c(e,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(t,e){this.props.activeNotes!==t.activeNotes&&this.handleNoteChanges({prevActiveNotes:t.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return n.default.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},n.default.createElement(E,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),e}(n.default.Component);p(j,"propTypes",{noteRange:i.default.object.isRequired,activeNotes:i.default.arrayOf(i.default.number.isRequired).isRequired,playNote:i.default.func.isRequired,stopNote:i.default.func.isRequired,onPlayNoteInput:i.default.func.isRequired,onStopNoteInput:i.default.func.isRequired,renderNoteLabel:i.default.func.isRequired,className:i.default.string,disabled:i.default.bool,width:i.default.number,keyWidthToHeight:i.default.number,keyboardShortcuts:i.default.arrayOf(i.default.shape({key:i.default.string.isRequired,midiNumber:i.default.number.isRequired}))}),p(j,"defaultProps",{renderNoteLabel:function(t){var e=t.keyboardShortcut,o=(t.midiNumber,t.isActive),r=t.isAccidental;return e?n.default.createElement("div",{className:(0,a.default)("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":o,"ReactPiano__NoteLabel--accidental":r,"ReactPiano__NoteLabel--natural":!r})},e):null}});var T=function(t){function e(){s(this,e);for(var t,n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return p(v(n=b(this,(t=h(e)).call.apply(t,[this].concat(r)))),"state",{activeNotes:n.props.activeNotes||[]}),p(v(n),"handlePlayNoteInput",function(t){n.setState(function(e){return(n.props.onPlayNoteInput&&n.props.onPlayNoteInput(t,{prevActiveNotes:e.activeNotes}),e.activeNotes.includes(t))?null:{activeNotes:e.activeNotes.concat(t)}})}),p(v(n),"handleStopNoteInput",function(t){n.setState(function(e){return n.props.onStopNoteInput&&n.props.onStopNoteInput(t,{prevActiveNotes:n.state.activeNotes}),{activeNotes:e.activeNotes.filter(function(e){return t!==e})}})}),n}return f(e,t),c(e,[{key:"componentDidUpdate",value:function(t){t.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var t=this.props,e=(t.activeNotes,t.onPlayNoteInput,t.onStopNoteInput,function(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,["activeNotes","onPlayNoteInput","onStopNoteInput"]));return n.default.createElement(j,d({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},e))}}]),e}(n.default.Component);p(T,"propTypes",{noteRange:i.default.object.isRequired,activeNotes:i.default.arrayOf(i.default.number.isRequired),playNote:i.default.func.isRequired,stopNote:i.default.func.isRequired,onPlayNoteInput:i.default.func,onStopNoteInput:i.default.func,renderNoteLabel:i.default.func,className:i.default.string,disabled:i.default.bool,width:i.default.number,keyWidthToHeight:i.default.number,keyboardShortcuts:i.default.arrayOf(i.default.shape({key:i.default.string.isRequired,midiNumber:i.default.number.isRequired}))});let x=({note:t,currentTick:n,ticksPerPixel:o,pianoPosition:r,keyWidth:i,isNextNote:a})=>{var u;let s,l=t.duration/o,c=(t.startTick-n)/O,p=r.top-l-c,{left:d,isBlack:f}=(s=[1,3,6,8,10].includes((u=t.midi)%12),{left:.7*i*(u-21),isBlack:s});if(p>r.top||p<-l)return null;let h={position:"absolute",top:`${p}px`,left:`${r.left+d}px`,width:`${f?.6*i:i}px`,height:`${l}px`,backgroundColor:a?"yellow":f?"black":"cyan",border:"1px solid grey",borderRadius:"4px",zIndex:f?2:1};return(0,e.jsx)("div",{style:h})},O=3840,K=({file:t,onMidiMessage:r})=>{let i=(0,n.useRef)(null),a=(0,n.useRef)(null),[u,s]=(0,n.useState)([]),[l,c]=(0,n.useState)(0),[p,d]=(0,n.useState)(0),[f,h]=(0,n.useState)("stopped"),[y,v]=(0,n.useState)([]),b=1e3/52;(0,n.useEffect)(()=>{if(a.current){let e=new o.AlphaTabApi(a.current,{player:{enablePlayer:!0,soundFont:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/soundfont/sonivox.sf2",scrollElement:a.current.parentElement}});return i.current=e,e.midiLoaded.on(t=>{let e=[];t.tracks.forEach(t=>{t.events.forEach(n=>{if(144===n.type){let o=t.events.find(t=>128===t.type&&t.noteKey===n.noteKey&&t.tick>n.tick);o&&e.push({midi:n.noteKey,startTick:n.tick,duration:o.tick-n.tick})}})}),e.sort((t,e)=>t.startTick-e.startTick),s(e)}),e.load(t),()=>{e.destroy()}}},[t]),(0,n.useEffect)(()=>{let t,e=()=>{if("playing"===f&&(i.current?.player&&(i.current.player.tickPosition+=1,c(i.current.player.tickPosition)),u.length>p)){let t=u[p];(i.current?.player.tickPosition??0)>=t.startTick&&h("waiting")}t=requestAnimationFrame(e)};return"playing"===f&&(t=requestAnimationFrame(e)),()=>{cancelAnimationFrame(t)}},[f,u,p]);let N=(0,n.useCallback)(t=>{let e=t[0]>>4,n=t[1],o=t.length>2?t[2]:0;9===e&&o>0?(v(t=>[...t,n]),"waiting"===f&&u.length>p&&n===u[p].midi&&(d(t=>t+1),h("playing"))):(8===e||9===e&&0===o)&&v(t=>t.filter(t=>t!==n))},[f,u,p]);(0,n.useEffect)(()=>{r(N)},[N,r]);let g={top:500,left:0},m=u.length>p?u[p]:null;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{ref:a,style:{height:"1px",overflow:"hidden"}}),(0,e.jsx)("button",{onClick:()=>{i.current&&(i.current.player?.play(),i.current.player?.pause(),h("playing"))},disabled:"stopped"!==f,children:"Bắt đầu"}),(0,e.jsxs)("p",{children:["Trạng thái: ",f]}),m&&(0,e.jsxs)("p",{children:["Nốt tiếp theo: ",m.midi]}),(0,e.jsx)("div",{style:{position:"relative",height:`${g.top}px`,width:"1000px",overflow:"hidden",backgroundColor:"#f0f0f0",border:"1px solid #ccc"},children:u.map((t,n)=>(0,e.jsx)(x,{note:t,currentTick:l,ticksPerPixel:O/g.top,pianoPosition:g,keyWidth:b,isNextNote:n===p},`${t.startTick}-${t.midi}`))}),(0,e.jsx)("div",{style:{position:"relative",top:g.top,left:g.left},children:(0,e.jsx)(E,{noteRange:{first:R("a0"),last:R("c8")},playNote:()=>{},stopNote:()=>{},width:1e3,activeNotes:y,keyWidthToHeightRatio:.2,renderNoteLabel:({midiNumber:t,isAccidental:n,isActive:o})=>m&&t===m.midi?(0,e.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 0, 0.5)",zIndex:3}}):null})})]})};t.s(["PianoTutorial",0,K,"default",0,K],94831)},70476,t=>{t.n(t.i(94831))}]);